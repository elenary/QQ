<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>scales</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="scales_files/libs/clipboard/clipboard.min.js"></script>
<script src="scales_files/libs/quarto-html/quarto.js"></script>
<script src="scales_files/libs/quarto-html/popper.min.js"></script>
<script src="scales_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="scales_files/libs/quarto-html/anchor.min.js"></script>
<link href="scales_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="scales_files/libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="scales_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="scales_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="scales_files/libs/bootstrap/bootstrap-973236bd072d72a04ee9cd82dcc9cb29.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">scales</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="data-and-types-of-scales" class="level1">
<h1>Data and types of scales</h1>
<section id="measurement-and-variable" class="level2">
<h2 class="anchored" data-anchor-id="measurement-and-variable">Measurement and variable</h2>
<p>What does it mean to measure something? It means <strong>to bring some value on a scale into conformity with the studied feature</strong> .</p>
<p>What could be an example of a trait? Anything that we need to measure in a study: number of cups of coffee per day, concentration level, number of errors, reaction time, degree of burnout, number of tasks completed, level of neuroticism, student rating, number of children in the family, temperature, etc.</p>
<p><strong>The feature</strong> we are studying is also called <strong>a variable</strong> . We will encounter this concept constantly in data analysis. In fact, if we look at the observation table, any column with measurements is a variable. The rows contain observations, for example, each new person from our sample. The value in a certain column is <strong>the value</strong> of the variable of this observation.</p>
<p>Let’s return to the case with Nikita, who studies burnout of university employees. Let’s make a table of data that Nikita could measure.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>teacher_number <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">30</span>,<span class="dv">1</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>age <span class="ot">&lt;-</span>  <span class="fu">sample</span>(<span class="dv">22</span><span class="sc">:</span><span class="dv">60</span>, <span class="at">size =</span> <span class="dv">30</span>, <span class="at">replace =</span> T)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>exp_years <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>, <span class="at">size =</span> <span class="dv">30</span>, <span class="at">replace =</span> T)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>exp_scaled <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(exp_years <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="sc">&amp;</span> exp_years <span class="sc">&lt;=</span> <span class="dv">2</span>, <span class="st">"от 1 до 2"</span>,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">ifelse</span>(exp_years <span class="sc">&gt;</span> <span class="dv">2</span> <span class="sc">&amp;</span> exp_years <span class="sc">&lt;=</span> <span class="dv">5</span>, <span class="st">"от 3 до 5"</span>,</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">ifelse</span>(exp_years <span class="sc">&gt;</span> <span class="dv">5</span>, <span class="st">"больше 5"</span>, exp_years)))</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>burnout_MBI <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">19</span><span class="sc">:</span><span class="dv">70</span>, <span class="at">size =</span> <span class="dv">30</span>, <span class="at">replace =</span> T)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>univer <span class="ot">&lt;-</span>  <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"MSU"</span>, <span class="st">"HSE"</span>, <span class="st">"MSU"</span>, <span class="st">"RANEPA"</span>, <span class="st">"HSE"</span>, <span class="st">"RANEPA"</span>),<span class="dv">5</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>burnout <span class="ot">&lt;-</span> <span class="fu">tibble</span>(teacher_number, age, exp_years, exp_scaled, burnout_MBI, univer)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(burnout[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">teacher_number</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">age</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">exp_years</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">exp_scaled</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">burnout_MBI</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">univer</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">39</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">от 1 до 2</td>
<td style="text-align: right;">58</td>
<td style="text-align: left;">MSU</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">27</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">от 1 до 2</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">HSE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">38</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">больше 5</td>
<td style="text-align: right;">39</td>
<td style="text-align: left;">MSU</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">37</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">от 1 до 2</td>
<td style="text-align: right;">24</td>
<td style="text-align: left;">RANEPA</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: right;">31</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">больше 5</td>
<td style="text-align: right;">40</td>
<td style="text-align: left;">HSE</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">больше 5</td>
<td style="text-align: right;">56</td>
<td style="text-align: left;">RANEPA</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td style="text-align: right;">47</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">больше 5</td>
<td style="text-align: right;">30</td>
<td style="text-align: left;">MSU</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td style="text-align: right;">43</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">больше 5</td>
<td style="text-align: right;">28</td>
<td style="text-align: left;">HSE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">от 1 до 2</td>
<td style="text-align: right;">62</td>
<td style="text-align: left;">MSU</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td style="text-align: right;">37</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">от 3 до 5</td>
<td style="text-align: right;">40</td>
<td style="text-align: left;">RANEPA</td>
</tr>
</tbody>
</table>


</div>
</div>
<table class="caption-top table">
<colgroup>
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;"><strong>teacher_number</strong></th>
<th style="text-align: right;"><strong>age</strong></th>
<th style="text-align: right;"><strong>exp_years</strong></th>
<th style="text-align: left;"><strong>exp_scaled</strong></th>
<th style="text-align: right;"><strong>burnout_MBI</strong></th>
<th style="text-align: left;"><strong>univer</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">51</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">from 3 to 5</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">MSU</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">54</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">from 3 to 5</td>
<td style="text-align: right;">65</td>
<td style="text-align: left;">HSE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">from 3 to 5</td>
<td style="text-align: right;">63</td>
<td style="text-align: left;">MSU</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">more than 5</td>
<td style="text-align: right;">33</td>
<td style="text-align: left;">RANEPA</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: right;">58</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">from 3 to 5</td>
<td style="text-align: right;">42</td>
<td style="text-align: left;">HSE</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">from 1 to 2</td>
<td style="text-align: right;">50</td>
<td style="text-align: left;">RANEPA</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td style="text-align: right;">49</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">from 1 to 2</td>
<td style="text-align: right;">60</td>
<td style="text-align: left;">MSU</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">from 3 to 5</td>
<td style="text-align: right;">44</td>
<td style="text-align: left;">HSE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">from 3 to 5</td>
<td style="text-align: right;">42</td>
<td style="text-align: left;">MSU</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">more than 5</td>
<td style="text-align: right;">27</td>
<td style="text-align: left;">RANEPA</td>
</tr>
</tbody>
</table>
<p><em>What will be the variables here?</em></p>
<p>In the definition of measurement, in addition to the feature, there is a second important concept - the scale.</p>
<p><strong>A scale</strong> is a system of measurement. So that we can all use the same units of measurement and not go crazy, we, the people of planet Earth, use uniform scales. There are 4 of them, and they are <strong>metric and non-metric</strong> - that is, whether we can attach a measuring ruler to them or not. Here, a measuring ruler is any conventional device that has a division value (centimeter, gram, second, piece).</p>
</section>
<section id="quantitative-and-non-quantitative-data" class="level2">
<h2 class="anchored" data-anchor-id="quantitative-and-non-quantitative-data">3.2 Quantitative and non-quantitative data</h2>
<p>Data measured by metric scales are <strong>quantitative</strong> data (e.g.&nbsp;height, weight, number of cases, temperature). What cannot be measured by metric scales (e.g.&nbsp;eye color, well-being, level of neuroticism, level of education) are <strong>non-quantitative</strong> data, which can have different names: <strong>categorical</strong> , sometimes <strong>qualitative</strong> .</p>
<p>Sometimes data is called qualitative as opposed to quantitative, but this is not entirely correct: the distinction between quantitative and qualitative is usually applied to types of research, where qualitative research is, for example, interviews or analysis of blocks of text. But as a result of this analysis, we may well end up with quantitative variables, for example, the number of times a particular word was used, so I recommend not using the word “qualitative” in relation to data, rather than types of research.</p>
<p>With quantitative data it’s simpler – this is everything that can be measured with a metric scale, a conventional ruler.</p>
<p>Among non-quantitative data, there are two types: categorical and rank (ordinal)</p>
<p>We will examine this data in detail on the scales.</p>
</section>
<section id="types-of-scales" class="level2">
<h2 class="anchored" data-anchor-id="types-of-scales">3.3 Types of scales</h2>
<p>As we have already understood, different data refer to different scales.</p>
<p>Different scales have different <strong>measuring power</strong> – the precision with which we measure a feature. The same feature can be measured with different precision: for example, depending on the research question, height can be expressed quantitatively in centimeters on the interval {0; ∞}, or it can be coded as {“less than 150 cm”; 150 cm and more} if we are only interested in prevalence over a certain feature.</p>
<p>There are 4 scales in total, if you arrange them from bottom to top according to measuring power: names, ordinal, interval, ratios.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Scale</strong></th>
<th><strong>Description</strong></th>
<th><strong>Possible operations</strong></th>
<th><strong>Examples</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Relationships (absolute)</strong></td>
<td>Quantitative, there is absolute zero, you can calculate <em>how much</em> more or less, and <em>how many times</em></td>
<td>=, ≠≠, &gt;, &lt;, +, -, ×, ÷</td>
<td>Height, weight, number of cases</td>
</tr>
<tr class="even">
<td><strong>Interval (difference)</strong></td>
<td>Quantitative, but there is no absolute zero, you can calculate <em>how much</em> more or less, but you can’t calculate <em>how many times</em></td>
<td>=,≠≠, &gt;, &lt;, +, -</td>
<td>Temperature in degrees Celsius, timekeeping according to different calendars</td>
</tr>
<tr class="odd">
<td><strong>Ordinal (rank, ordinal)</strong></td>
<td>Categorical (qualitative), you can set “more” or “less”, but you can’t calculate quantitatively how much more or less</td>
<td>=, ≠≠, &gt;, &lt;</td>
<td>Education level, neuroticism level, sports rating</td>
</tr>
<tr class="even">
<td><strong>Names (nominal)</strong></td>
<td>Categorical (qualitative), cannot be set to “more” or “less”</td>
<td>=,≠≠</td>
<td>Gender, color, place of residence, name of university</td>
</tr>
</tbody>
</table>
</section>
<section id="continuous-and-discrete-data" class="level2">
<h2 class="anchored" data-anchor-id="continuous-and-discrete-data">3.4 Continuous and discrete data</h2>
<p>We see that our richest possibilities for measurement lie in quantitative scales – on the ratio scale (it is the steepest) and the interval scale (it is worse and, in fact, is rarely encountered in research in our field).</p>
<p>Quantitative data can be discrete, when the variable takes strictly defined values, and continuous, when it can take any values, to infinity or over a given interval.</p>
<p>For example, in our example with the burnout study, the variable age can take any value: teachers can be 25 years old, 27.5 years old, or 31,666.. years old - these are all values ​​from <em>the range of acceptable values ​​for this variable</em> . But if we consider the number of people infected with coronavirus, there is no way it can be 27.5 or 31,666.. - the number of people infected is not expressed as fractional shares of one person.</p>
<p>An important concept here is <strong>the range of admissible values</strong> . For a continuous variable, this is always an interval, for example {0;+∞}, for discrete variables, it is strictly defined values, which, nevertheless, can also tend to infinity, for example, {0;1;2;3;4;5;6;7;8…}</p>
</section>
<section id="how-can-i-determine-what-scale-the-data-is-on" class="level2">
<h2 class="anchored" data-anchor-id="how-can-i-determine-what-scale-the-data-is-on">3.5 How can I determine what scale the data is on?</h2>
<p>This is quite a difficult question, and at first it is very difficult to answer it ( <em>and this is normal</em> ). The most difficult thing is to distinguish an ordinal scale from an interval scale, and from the point of view of measurement theory this establishment is not an easy task at all. We rarely encounter a classical interval scale like temperature in degrees Celsius or a scale of chronology in our studies, but the data of the sum scores of questionnaires, most often, also belong to the interval scale, although they have more ordinal properties (it is difficult to say that between 20 and 30 points on the Beck anxiety scale there is exactly the same anxiety interval as between 60 and 70 points). We would rather classify it as an ordinal scale due to the fact that there are a lot of divisions on this scale (more than when we evaluate something on a scale from 1 to 5), and we do not want to limit ourselves to statistical methods suitable for working only with an ordinal scale and not higher. In other cases, defining the scale is a little easier. I suggest using the following simplified algorithm for determining the scale for the first time:</p>
<ol type="1">
<li><p>Are there any letters in the variable values? If so, it is either a nominative scale or an ordinal scale.</p></li>
<li><p>Can we arrange these letter values ​​in a certain order on the x-scale? Will anything change if we swap adjacent values? If yes, it is an ordinal scale, if no, it is a nominative scale (for example, I can arrange the names of universities in any order, but the places taken in competitions, only in the order 1-2-3, the change 1-3-2 ruins the meaning)</p></li>
<li><p>If the answer to (1) is no, and there are no letter values, can the numbers be replaced with letters without changing anything? If yes, then this is also a nominative scale (e.g., subject ID)</p></li>
<li><p>If there are no letters and the numbers in the data cannot be replaced by letters, it can be either an ordinal scale, an interval scale, or a ratio scale.</p></li>
<li><p>Are the intervals on the scale equal at different places? Will the interval, for example, 20 to 30 include exactly the same number of values ​​as the interval from 50 to 60? If not, it is an ordinal scale; if yes, it is either an interval or a ratio scale.</p></li>
<li><p>Is there an absolute zero on the scale? Doesn’t it sound absurd to say that “value 1” <em>is so many times greater or less</em> than “value 2”? If so, it’s a ratio scale; if not, it’s an interval scale. Done!</p></li>
</ol>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>